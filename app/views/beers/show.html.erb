<div class="container mt-2 ">
  <div class="row">
    <div class="col-xs-12 col-sm-6 col-sm-offset-3">

<!-- Review Average Rating -->

<h2><%= @beer.name %></h2>
  <h4>Average Rating</h4>
    <div class="average-review-rating" data-score=<%= @beer.average_review %>></div>
    <span>Based on <%= @beer.reviews.count %> reviews</span>
  <br>

<!-- Beer Avatar -->

  <% if @beer.avatar.attached? %>
    <%= cl_image_tag @beer.avatar.key, width: 150, height: 150, crop: :fill %>
      <% else %>
    <%= image_tag 'BeerWizardLogo.png',  :width=> 150, :height=> 150 %>
  <% end %>

<!-- review likes w ajax rendering like/unlike -->


  <%= link_to like_beer_path(@beer), class: "like-btn", method: :put, remote: :true do %>
    <div>
      <span><p><i class="fas fa-heart pl-4"></i></p></span>
    </div>
  <% end %>
 <span class="likes-count" id="likes-count-<%= @beer.id %>"><%= render 'beers/vote', beer: @beer %></span>

<!-- Review Size -->
<br>
  <div class="mt-4">
  <h2>
    <%= pluralize @beer.reviews.size, "Review" %>
  </h2>
  </div>
<br>

<!-- review form w ajax  -->

  <div id="reviews">
    <% if @beer.reviews.blank? %>
      Be the first to leave a review for <%= @beer.name %> Beer!
    <% else %>

    <% @beer.reviews.each do |review| %>
  <br>
    <%= render 'reviews/show', review: review %>
  <% end %>
<% end %>
</div>

<!-- Beer edit for debuging beer info will remove in final -->
<hr>
  <%= render 'reviews/form', beer: @beer, review: @review %>
    <%=link_to "edit beer", edit_beer_path, class: "btn btn-primary mt-2" %>
    </div>
  </div>
</div>

<!-- review scripts w raty -->
<!-- review scripts w raty to rate -->
<script>
$(document).ready(function() {
  $('.review-rating').raty({
      readOnly: true,
      score: function() {
          return $(this).attr('data-score');
      },
      path: '/assets/'
  });
});
</script>
<!-- review scripts w raty to average -->
<script>
$(document).ready(function() {
  $('.average-review-rating').raty({
      readOnly: true,
      path: '/assets/',
      score: function() {
          return $(this).attr('data-score');
      },
  });
});
</script>
